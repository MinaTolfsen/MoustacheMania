# Prosjektrapport - oblig 2
**Team:** Git Rekt – Mina Tolfsen, Tobias With Thorsen, Emil Johannessen


## Team og roller
Så langt har rollene fungert bra. Mina har tatt bra med ansvar for å ordne grafikken for spillet. Emil fungerer bra som utvikler og trives med det. Tobias har fungert bra som team lead.

Vi har ikke hatt behov for mange andre roller. Vi er et lite team så å ha mange flere roller per hode blir mer styr enn at det hjelper. Team lead og grafikk ansvarlig og utvikler er mer enn plenti for oss. Tydelige rammer uten at man gir unødvendige roller for dette prosjektet.

**Team lead / utvikler (Tobias)** - Som team lead har jeg følt på et ansvar for å ha en oversikt over hva som skal være på plass til de ulike fristene. Jeg har kjent på at det til tider har vært litt utfordrende siden dette gjerne er et litt større prosjekt enn i andre emner, samt at jeg da også skal forsøke å delegere til andre personer, og ikke gjøre alt selv som man vanligvis må i obliger i andre emner.

**Grafisk designer/utvikler (Mina)** - Som grafisk designer og utvikler har jeg trivdes godt i min rolle. Å ha friheten til å designe visuelle elementer for spillet har vært morsomt og jeg har kunnet for det meste bestemt litt selv. Selv om jeg ikke var særlig aktiv når det gjaldt koding i begynnelsen av prosjektet, har jeg de siste ukene før fristen den 8. mars investert mer tid i kodingen. Dette har gitt meg en bedre forståelse av koden.

**Utvikler (Emil)** - Som utvikler har jeg hovedsakelig jobbet med koding, men også pratet mye og hatt kontakt med resten av teamet, og jeg synes teamet og rollene fungerer bra. God dynamikk og jeg merker nytten av den åpne og lette kommunikasjonen vi har.


## Prosjektmetodikk
**Tobias** - Jeg ønsker å ta opp at det hovedsakelig er jeg som tar i bruk Kanban-boardet og ønsker gjerne at dere bruker den mer for å skaffe dere oversikt over hva som må gjøres. Samt at dere kan legge inn TODO’s dersom dere kommer over noe dere mener burde bli gjort. Ellers synes jeg alle 3 har fått inn Git arbeidsflyten i fingrene og den funker ganske bra. Sjeldent vi får merge conflicts og det skaper mer struktur i hva som er pågående arbeid. Når vi har fått merge conflicts, så har det gått ganske greit å løse dem uten komplikasjoner.

**Mina** - Jeg deler Tobias' synspunkt om at vi bør forbedre bruken av KanBan-brettet og være mer konsekvente med å skrive TODOs i koden. Personlig har jeg en tendens til å bare legge inn // og deretter skrive korte kommentarer, men det ville være mer hensiktsmessig å inkludere flere TODOs. Dette vil bidra til å skape en mer organisert struktur i koden. Utenom dette er jeg svært tilfreds med dynamikken i gruppen vår. Vi kommuniserer effektivt på skolen og holder hverandre alltid oppdatert om eventuelle problemer eller løsninger. Vi har også forbedret vår evne til å parprogrammere og generelt sett jobbe mer sammen, selv om vi fokuserer på ulike utfordringer. Jeg mener også at Emil og jeg bør engasjere oss mer i å støtte Tobias med overordnet oversikt, spesielt når det kommer til obligatoriske steg.

**Emil** - Jeg synes dynamikken og arbeidsmetodikken i teamet er veldig bra, spesielt fysisk og vi har et godt miljø som gruppe. Enig med Tobias at jeg bør benytte Kanban boardet på git mer som hjelpemiddel, men ellers avklarer vi og diskuterer effektivt og med åpenhet rundt mål, progresjon og ideer, da mye fysisk som jeg synes funker bra.


## Gruppedynamikk og kommunikasjon
**Tobias** - Synes gruppedynamikken funker ganske bra. Vi prater oss fint imellom og stiller opp for hverandre dersom man har spørsmål eller trenger hjelp. Vi bruker discord for å kommunisere merge requests dersom vi ikke er fysisk til stede og kan spørre. Ellers bruker vi discord for å avtale møtetidspunkt eller andre ting som eventuelt kommer i veien for de vanlige rutinene.

**Mina** - Jeg opplever at gruppen har et svært positivt samarbeid. Vi har kjent hverandre siden studiestart, så dynamikken og kommunikasjonen mellom oss er problemfri. Vi viser også stor forståelse for hverandres tidsplaner og krav, og som en samlet gruppe utgjør vi et sterkt team både i og utenfor skolesammenheng.

**Emil** - Sett på gruppedynamikk på et mer personlig perspektiv, istedenfor rolle og gruppemessig synes jeg også personlighetene i gruppa fungerer bra. Vi har en fin tone både når vi samles fysisk og over andre kanaler, der det er lav terskel til å ta opp noe eller få hjelp. Mye bra fysisk tilstedeværelse og kommunikasjon, lett å ta opp og håndtere ting. Ellers bruker vi discord til å sende filer, sette opp møter eller andre ting som måtte komme opp. Jeg synes det er velfungerende.


## Retrospektiv
Vi har klart ganske mye til nå tørr jeg påstå. Vi har lagd flere skjermer; startskjerm, levelskjerm, spillskjerm, pauseskjerm, og vi har fått opp banen, bakgrunnsmusikk og at spilleren kan løpe rundt på banen med animerte bevegelser.

Vi sitter nesten hver dag samlet på bachelor-lesesalen for informatikk, så vi har veldig flytende dialog og kan lett nå hverandre i “arbeidstiden”.
Gjennom kanban boardet kan vi lett fordele oppgaver og assigne hvem som holder på å jobbe med dem, samt en tidsfrist fram til de ukentlige møtene eller oblig fristene.
Som sagt så sitter vi ofte sammen på lesesalen, så vi kan lett muntlig delegere oppgaver oss i mellom for så å føre opp dette i kanban boardet.
Per nå er det en liten skjevfordeling i commits. Mina har en del flere commits enn Tobias og Emil. Dette har skjedd litt fordi Mina håndterte ganske mye grafikk før vi kodingen skjøt skikkelig fart, og commitet disse endringene.
I tillegg så var det en dag Tobias, endte opp med å kode på Minas PC istedenfor min (disse commitsene er markert med ‘Tobias på Minas PC:’ i commit meldingene det gjelder).
Mina har også vært den som har commited møtereferatene, så har fått litt ekstra antall commits der. Vi tenker at vi rullerere litt på dette for å jevne ut commitsene som kommer fra møtereferatene.
Emil og Tobias har holdt oss på ganske likt antall commits fram til oblig 2.
Møtereferat for ukene fram til oblig 2 fristen finnes under ‘doc/møte_referat’. det er møtereferat uke8 til uke10
Forbedringspunkter fra retrospektivet, som skal følges opp under neste sprint:
Alle bruke kanban board mer aktivt. Allerede sett forbedringer på før oblig2 innleveringsfristen.
Jevne ut antall commits per person.
Bli bedre til å dokumentere og holde koden ryddig underveis.


# Krav og spesifikasjon
## MVP
Vi har kommet på god vei mot MVP, og oppnådd mye fram mot oblig2 fristen.
- Hovedmenyskjerm - ✅rettelse: har kalt den for StartScreen i koden.
- Pausemenyskjerm - ✅ rettelse: pauseskjerm som man kan gå inn på mens man spiller.
- Visning av et nivå - ✅rettelse: vi har klart å vise 2 ulike nivåer.
- Spilleren kan bevege seg fra venstre til høyre på 2D-nivået. - ✅Spilleren kan bevege seg fra venstre til høyre samt hoppe. Dette er med animasjoner i tillegg.
- Spilleren kan samhandle med terrenget (plattformer, vegger) - ⏳Per nå er det kun kollisjon i Y-aksen av Tiled-kartet som funker. Dette er trolig på grunn av rekkefølgen vi sjekker spillerens posisjon i forhold til omgivelsene rundt. Per nå er rekkefølgen tyngdekraft som drar spilleren ned, sjekk av kollisjon, user input. Dette gjør at selv om spilleren kolliderer, så vil den kunne overskrive velocity verdien og dermed gå inn i bokser på banen i x-aksen.
- Monstre som kan elimineres og eliminere spilleren. - ⏳Dette er ikke påbegynt enda.
- Et mål for spilleren å nå og fullføre nivået. - ⏳Et mål er tegnet grafisk og er market i eget layer som da indikererer posisjon for målet. Gjenstår å implementere logikken for når spilleren når denne posisjonen.
- Bakgrunnsmusikk og lydeffekter når visse hendelser skjer. ✅⏳  Bakgrunnsmusikk er på plass og lydeffekt for når spilleren får power-up er på plass, men selve logikken for når spilleren får en power-up gjenstår.
## Endringer i MVP:
Ettersom vi føler vi har klart såpass mye fram til oblig 2 samt at det er visse krav til spillet, så gjøres disse endringene i MVP:

Deler opp musikk og lydeffekt til egne punkter:
- Bakgrunnsmusikk ✅
- Lydeffekt når visse hendelser skjer ⏳
- Spilleren kan få en power-up som gir spilleren en ekstra egenskap (dobbelthopp eller lignende) - ⏳

## BRUKERHISTORIER
Vi fikk trekk fra oblig1 for at vi manglet brukerhistorier, så vi fikk mulighet til å inkludere det i oblig2.
Fullførte akseptansekriterier markeres mer ✅.
1. **Som en spiller ønsker jeg å kunne se og navigere gjennom en bane for å kunne gjøre fremgang i spillet.**
   - Akseptansekriterier:
        Banen vises gjennom å implementere Model-View-Controller (MVC) hvor View viser banen og Model håndterer logikken og Controller håndterere bruker input. ✅
        - Arbeidsoppgaver:    
            - Implementere klassene Model.java, View.java, Controller.java.
            - Abstrahere bort detaljer ved å implementere interfacene IModel.java, IView.java, IController.java  
              Model.java håndterer logikken til spillet, slik at den flytter på spilleren dersom Controller gir beskjed om at spilleren har forsøkt å flytte på seg.
            - Controller.java skal lytte etter brukerinput og kalle på metoder basert på dette.
            - I View.java skal man ha tilgang på et model og game objekt.
            - I View.java skal man lese inn Tiled banen med LibGDX metoder som vil gjøre banen synlig for spilleren.
            - View.java må også håndtere animasjonen til spilleren gjennom å lese en PNG-fil. View har tilgang på player-objektet gjennom model-objektet ettersom model skal styre logikken og har dermed tilgang til player.


2. **Som en spiller ønsker jeg å kunne styre karakteren min med piltastene slik at jeg kan navigere gjennom nivåene.**
   Akseptansekriterier:
   - Karakteren beveger seg i ønsket retning når piltastene trykkes. ✅
        - Arbeidsoppgaver:    
            - Implementer type event listeners i Controller.java slik at når en spiller trykker på piltast mot venstre så vil controller kalle på en metode hos model som da vil flytte på spilleren. View må da tolke posisjonen slik at den leser den nye posisjonen til spilleren.
   - Karakteren stopper når piltasten slippes.✅
        - Arbeidsoppgaver:
            - Det finnes en egen type metode i libGDX bilblioteket som sjekker om spilleren holder inne knappen eller ikke. Den heter `Gdx.input.isKeyPressed()`
   - Karakteren kan ikke gå gjennom vegger eller andre uoverstigelige hindringer.✅
        - Arbeidsoppgaver:
          - Implementere en funksjon i model som sjekker om spilleren kolliderer med banen.


3. **Som en spiller ønsker jeg å kunne hoppe med min karakter ved å trykke på en knapp slik at jeg kan unngå hindringer og nå høyere plattformer.  **
     - Akseptansekriterier:
       - Karakteren hopper når hoppeknappen trykkes. ✅
         - Arbeidsoppgaver:
           - Det finnes en egen type metode i libGDX biblioteket som skjekker om spilleren holder inne knappen eller ikke. Den heter ‘Gdx.input.isKeyPressed()’
       - Karakteren lander trygt på plattformen og ikke faller gjennom den. ✅
          - Arbeidsoppgaver:
            - Definere en konstant variabel som er tyngekraften og bestemmer hvor mye spilleren skal trekkes ned i y-aksen for hver gang update-metoden blir kalt i Model.java.


4. **Som en spiller ønsker jeg å kunne samle mynter i løpet av spillet for å øke poengsummen min.**
   - Akseptansekriterier:
        - Mynter er plassert på forskjellige steder i hvert nivå.
            - Arbeidsoppgaver:
                - Implementere en metode i Model.java som leser av et layer fra Tiled banen hvor man har markert hvor myntene befinner seg på banen.
                - View.java må ha en metode som leser av layeret fra model og tegner disse på banen.
                -  Når karakteren kommer i kontakt med en mynt, øker spillerens poengsum.
            - Arbeidsoppgaver:
                - I model.java implementerer vi en metode som sjekker om spilleren er borti mynten, og vil deretter fjerne den og øke spillerens sum.
                - Update-metoden i View.java vil da se at myntene er borte og vise tilsvarende.
                - En lydeffekt spilles av når en mynt samles inn for å indikere suksess.
            - Arbeidsoppgaver:
                - Legger til lyden i SoundController.java klassaen.
                - I model.java vil man registrere at spilleren er nær en mynt, som sender signal til klassen SoundController.java klassen som vil spille av lyden.


5. **Som en spiller ønsker jeg å kunne samle power-ups som gir meg midlertidige evner, for eksempel høyere hopp eller usynlighet.**
   - Akseptansekriterier:
        - Power-ups er plassert på spesielle steder i nivåene.
            - Arbeidsoppgaver:
                - Legge til et layer i Tiled banen for hvor power-ups skal være plassert.
                - Implementere en metode Model.java som leser dette layeret og lagrer det i en variabel.
                - View.java vil da ha tilgang på denne variabelen gjennom at den har et model-objekt, og vil lese dette layer-et og vise power-ups.
        - Når karakteren samler en power-up, får de den tilhørende evnen i en begrenset periode.
            - Arbeidsoppgaver:
                - Implementere en metode i Player som endrer på feltvariabler til Player klassen som gjør at den får endrede egenskaper, feks dobbelthopp.
                - Når en spiller forsøker å gjøre noe gjennom Controller som lytter på brukerinput, så kan controller kalle på model som skal flytte på spilleren. Metoden i model kan gjøre en kjapp sjekk om spilleren har power-up eller ikke, ettersom det vil ha betydning for hvordan spilleren kan bevege seg.
        - Effekten av power-upen er synlig på skjermen (for eksempel større sprite for høyere hopp).
            - Arbeidsoppgaver:
                - Må tegne karakteren på nytt i Asprite så det blir synlig for spiller at de har fått power-upen.
                - Dette kan gjøres med å klone filen, og tegne over gamle tegninger av karakteren.
                - Vi kan bruke metoden render() i View.java, til å sjekke om spilleren har fått en power-up. Har spiller fått en power-up vil utseende til karakteren endres, med den nye Aspirte filen.
         
6. Som en spiller ønsker jeg å kunne bekjempe fiender ved å hoppe på dem eller bruke power-ups slik at jeg kan overvinne hindringer og utfordringer.**
   - Akseptansekriterier:
        - Fiender beveger seg innenfor visse områder og kan skade karakteren ved kontakt.
          - Arbeidsoppgaver:    
            - Implementere en metode i Model.java som flytter rundt på fiendene.
            - Må ta i bruk checkCollision-metode fra Model.java slik at fiendene beveger seg etter samme betingelser som spilleren.  
            - Karakteren kan bekjempe fiender ved å hoppe på dem eller bruke spesielle angrep avhengig av power-ups.
          - Arbeidsoppgaver
            - Implementere en metode i Model.java som sjekker om spilleren treffer en fienden ovenfra.
            - Når spilleren treffer fienden ovenfra, så må model.java fjerne denne fienden fra en arraylist eller lignende slik at View.java kan oppdatere det spilleren ser.
            - Når en fiende blir beseiret, forsvinner den fra skjermen med en passende animasjon.
          - Arbeidsoppgaver:
            - Tegne en sprite for fienden som er flat for å indikere at hen har blitt most.
            - I View.java sin render-metode må vi lage en renderMonster() metode som da vil oppdatere spriten til monsteret.


7. **Som en spiller ønsker jeg å kunne nå slutten av hvert nivå for å gå videre til neste nivå eller utfordring.**
   - Akseptansekriterier:
        - Hvert nivå har en tydelig definert avslutning, for eksempel en dør eller en portal. ✅
            - Arbeidsoppgaver:
                - Implementere en GAME_WON screen og håndtere i model-klassen når spilleren er i mål slik at man kan bytte skjermen til GAME_WON skjermen.
        - Når karakteren når avslutningen av et nivå, blir de overført til neste nivå. Spilleren får da opp en skjerm om å spille banen på nytt eller fortsette til neste nivå.
            - Arbeidsoppgaver:
                - Implementere alternativer i GAME_WON klassen der spilleren kan navigere/trykke seg til “Startkjemern eller tilbake til skjermen som viser valg av bane.


8. **Som en spiller ønsker jeg å kunne lagre spillet mitt slik at jeg kan fortsette fra der jeg slapp senere.**
   - Akseptansekriterier:
        - Etter spilleren har fullført en bane, så vil progresjonen lagres. Altså om spilleren har fullført gitt bane eller ei.
            - Arbeidsoppgaver
                - Etter en spiller fullfører et level, så lager man en fil som inneholder detaljer om spilleren har fullført banen eller ikke.
                - Denne filtypen tar vi med i .gitignore slik at vi ikke pusher dem til gitlab.
                - Når en spiller kommer til skjermen hvor man velger banen, så leser man av denne lagringsfilen for å se hvilke baner spilleren har tilgang på.

Disse akseptansekriteriene vil bidra til å veilede utviklingen av spillet ved å definere klare krav som må oppfylles for at hver brukerhistorie skal anses som fullført og akseptabel.
Vi velger å inkludere akseptansekriteriene i Kanban board enn at vi skal begynne å legge dem inn i milestones og få enda ett sted å forholde oss til. Vi tenker det blir mer rot enn nytteverdi.
   
   
## Prioriteringer for videre arbeid:
- Ting vi skal jobbe med videre:
- Fikse kollisjon i x-aksen.
- Når spilleren detter ut, så “dør” spilleren og gamestate setter til GAME_OVER.
- Lage GAME_OVER screen og håndtere når spilleren dør.
- Lage GAME_WON screen og håndtere når spilleren er i mål.
- Få spilleren til å starte på riktig posisjon.
- Fikse slik at banen dekker hele skjermen/spillvinduet, slik at det ikke lenger er svarte bokser på skjermen øverst og til venstre.
- Power-Up
- I LevelScreen skal vi legge til en “back to main menu”-knapp.

## Bugs som skal prioriteres for videre arbeid:
- Bug: spillet fortsetter selv om spilleren har detti ut av banen.
- Bug: Spilleren kan gå inn i klosser som egentlig er en del av kollisjon-layer. Dette er gjennom x-aksen. På grunn av dette kan spilleren kjapt gå av en plattform, falle litt ned og så gå tilbake slik at spilleren blir flyttet opp på plattformen igjen. Selv om spilleren treffer midt på boksen.
- Bug: Banen ligger ikke helt kant i kant med skjermen/spillvinduet. Så det er svarte bokser helt til venstre når man laster inn banen og over himmelen i banen.
   
# Kode
Utbedring av feil: Vi fikk ingen påpekelser av feil i koden, men derimot at vi manglet brukerhistorier. Det ligger i teksten over.

## Kontroll av OS kompatibilitet:
På gruppen har vi macOS og Windows. Begge har kjørt fint for oss. Vi har fått en medstudent som bruker Linux til å teste spillet på hans PC og den funket helt fint.

### Klassediagram:
Klassediagram finnes i ‘/doc/diagram-oblig2’.

### Tester
Foreløpig er det lagd tester for de ulike Screens-ene vi har, altså GUI-et.
Tester for spillogikken kommer senere.


