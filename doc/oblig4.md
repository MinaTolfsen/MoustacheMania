# Prosjektrapport - oblig 4
**Team:** Git Rekt – Mina Tolfsen, Tobias With Thorsen, Emil Johannessen


## Team og roller
Ingen endringer i situasjonen på hvordan rollene og teamet har funkert.

Det er fortsatt ikke hatt behov for mange andre roller ettersom vi er et lite team.
Teamlead og grafikk ansvarlig og utvikler er mer enn plenti for oss.
Tydelige rammer uten at man gir unødvendige roller for dette prosjektet.

Denne gangen snakker vi mer om opplevelsen for prosjektet gjennom hele semesteret.

**Team lead / utvikler (Tobias)** - Dette prosjektet har vært en veldig positiv opplevelse. Jeg har lært og erfart mye om hvordan det er å jobbe i team.
Både de positive og negative sidene. Det har også vært givende å skulle ha en rolle hvor man skal ha det helhetlige overbliket av prosjekket for å se at vi kommer oss i mål.
Jeg er en student som foretrekker å kunne bruke tid til å sette meg inn i oppgaven og tenke i fred for å komme fremover med en oppgave, så det å skulle delegere og informere dem på gruppen har vært
en ny utfordring, dog en viktig ting å lære seg / bli bedre på før arbeidslivet.
Siden forrige oblig har det ikke vært de sykeste endringene ettersom vi kun manglet objektfabrikker som krav. Det har også vært en del innspurt
i andre obliger i andre fag. 

**Grafisk designer/utvikler (Mina)** - Gjennom hele prosjektet har jeg trivdes i rollen som grafisk designer og utvikler, spesielt med å kunne leke med form og farger.
Jeg synes jeg har taklet mine individuelle oppgaver godt. Har drevet mye med det grafiske + koding.
Etter oblig3 har jeg dessverre ikke hatt tiden til å fokusere mye på INF112, med tanke på at jeg har hatt et par andre obligatoriske innleveringer.
Samt at gruppen ble enig at vi har kommet såpass langt tidlig i prosessen, at å prioritere andre fag ikke var noe problem.
Under hele prosjektet har gruppen hatt god kommunikasjon, uavhengig hvem oss som var borte eller om kommunikasjonen var over nett.

**Utvikler (Emil)** - Jeg har mesteparten av tiden jobbet med å implementere nye screens og håndtering av disse. Jeg synes dette har vært greit og det har vært lett å prate og jobbe dynamisk med de andre i teamet for å komme fram til løsinger.
Tydelige arbedisoppgaver og jevn arbeidsflyt, også tatt i betraktning at arbeidsmengden og flyten har latt seg lett og dynamisk justeres i teamet når andre ting, også har krevet oppmerksomhet og tid.
Jeg har trivdes som utvikler under dette prosjektet, og synes oppgavene mine har vært utfordrene nok, gøy og motiverende å se utviklingen. Jeg synes teamet har fungert godt, og funnet ut at
jeg liker å jobbe i team og dynamisk jobbe med andre. Lært å bruke hjelpemidler som Kanban-board og blitt mer kjent med noen arbeidsmetodikker og andre teknikker. Alt i alt kan jeg ikke si annet enn
at prosjektet vårt har vært en god erfaring og opplevelse.


## Prosjektmetodikk
**Tobias** - Kanban brettet begynner å bli tomt i "TODO" og "Pågående".
Kanban brettet har gjennom prosjektet funket ganske bra som et referansepunkt for hva som skal gjøres og har gitt gruppen
ganske god oversikt. Kanban board er noe jeg kommer til å forsøke å bruke i fremtidige hobbyprosjekt og skolearbeid.
Git-flyten har fortsatt å fungere veldig bra og vi har fortsatt med å holde en ganske jevn fordeling av commits mellom gruppemedlemmene.

**Mina** - Gruppen har vært flinke underveis til å benytte KanBan-bordet, og dette ga oss en bedre oversikt over oppgaver og tidsplanen vår.
Når det kommer til mine individuelle oppgaver, ble jeg bedre JavaDocs, samt at jeg har ryddet over koden vår.
Dette gjør jeg gjennom hele koden, for at strukturen gjennom skal være lik og systematisk.

**Emil** - Vi har jobbet med en arbdeidsmetodikk som kan likne på scrum der vi har jobbet dedikert mot mål, og hatt ukentlige møter samt lettere samtaler til tider daglig når vi har sittet sammen fysisk.
Sammen med dette har vi brukt Kanban-board som jeg syns har vært et ryddig og nyttig verktøy for å holde oversikt over arbeidsoppgaver, samt se hva resten av teamet holder på med og har planer om.
Har blitt konfertabel med git arbdeidsflyt og prosjekt gjennom gitlab som gjør det strukturert og enklere å jobbe som team med et prosjekt.


## Gruppedynamikk og kommunikasjon
**Tobias** - Gruppen har vært på samme bølgelengde siden oblig3 angående prioriteringer mellom all sjongleringen av alle emnene.
Vi har hatt god dialog gjennom hele prosjektet, og alle har kunnet uttrykke seg fritt og komme til ordet. Jeg er meget fornøyd med hvordan dialogen
har vært gjennom prosjektet. Vi har stort sett sittet i nærheten av hverandre på skolen og det har vært lett å ta opp ting med hverandre.
Likevel har det vært mulig å jobbe hjemmefra eller på "jobbreise" ved at dialogen har gått som smurt på Discord. Det viser fleksibiliteten til gruppen.

**Mina** - Gjennom hele prosjektet har jeg syntes at gruppen har hatt et godt samarbeid og hatt en flytende kommunikasjon.
Dette gjorde oss mer effektive, samt at det har hjulpet at vi sitter masse på samme plass på skolen.
Vi har også vært flinke til å gi hverandre mulighet til å reise og gjøre andre ting, ved å kommunisere godt over nettet.
Jeg vil si at gruppen har fungert godt sammen jevnt gjennom prosjektet.

**Emil** - Jeg har hatt en veldig positiv opplevelse av å samarbeide og jobbe i team under prosjektet. Lett og god stemning i teamet og det er lett å komme i kontakt med og kommunisere med de andre. Vi har ofte sittet sammen, både til jobbing med prosjektet, men også
ellers der enhver kan enkelt stille et spørsmål eller få hjelp med prosjektet selv om resten av teamet kanskje hold på med noe annet.
Lett og god stemning, god gruppedynamikk og det har vært lett å komme i kontakt med og kommunisere med de andre. Regelmessige møter og oppdateringer, samt lav-terskel kommunikajson over discord. Discord har fungert spesielt bra når deler av teamet har vært bortreist, men er osgå en bra løsning når vi sender filer eller merge requests. Fortsatt bra fysisk oppmøte og tilstedeværelse.


## Retrospektiv
I begynnelsen av prosjektet var vi litt fortvilet ettersom dette prosjektet var en ganske ny ting for alle sammen.
Vi gruet oss også litt til hvordan det skulle gå, men det har i bunn og grunn gått ganske bra når vi ser tilbake på det.
Vi har hatt god hjelp fra hverandre og medstudenter som har delt erfaringer fra da de hadde emnet selv.
Mellom oblig1 til oblig2 så opplevde vi et lite gjennombrudd. Det var rundt dette tidspunktet vi klarte å få vist banen
og plassert spilleren på kartet samt at spilleren kunne bevege seg. Dette var en kjempeboost for gruppen og motivasjoen
økte betraktelig. Etter oblig2 skjøt ting virkelig fart. Da raste vi gjennom MVP-kravene og vi kom oss nesten i mål til oblig3.
Alle sammen sitter med en ganske positiv opplevelse i siste innspurt mot oblig4 innleveringsfristen.

Underveis i hele prosjektet, har gruppen vært samlet fysisk og snakket sammen over Discord hvis noen har vært bortreist.  
Dette har fungert bra, og vi har klart å opprettholde god kommunikasjon uavhengig av hvor man har vært.
Vi har også benyttet Git og KanBan-bord som en måte å opprettholde god flyt og kommunikasjon.

Vi har nå til oblig4 ganske likt antall commits, noe vi føler er en bra indikasjon på at det er en grei fordeling av arbeid i gruppen. 
Commits-ene ligger mellom 46-48, noe vi synes er bra og reflekter over at det er god fordeling av oppgavene mellom oss.

Vi ligger ganske bra an. MVP-kravene er dekket. Brukerhistoriene er også dekket. Vi fjernet også siste kravet (nr. 8), til denne obligen. Se oblig3.md for begrunnelse.

Møtereferater finnes under `doc/møte_referat`. Gjelder uke 16 til uke 18.


# Krav og spesifikasjon
## MVP
Vi har oppnådd MVP.
- Hovedmenyskjerm - ✅
- Pausemenyskjerm - ✅
- Visning av et nivå - ✅
- Spilleren kan bevege seg fra venstre til høyre på 2D-nivået. - ✅ 
- Spilleren kan samhandle med terrenget (plattformer, vegger) - ✅
- Monstre som kan elimineres og eliminere spilleren. - ✅
- Et mål for spilleren å nå fram til og fullføre nivået. - ✅ 
- Bakgrunnsmusikk - ✅  
- Lydeffekt når visse hendelser skjer - ✅
- Spilleren kan få en power-up som gir spilleren en ekstra egenskap (dobbelthopp eller lignende) - ✅

## BRUKERHISTORIER
Vi fikk trekk fra oblig1 for at vi manglet brukerhistorier, så vi fikk mulighet til å inkludere det i oblig2.
Fullførte akseptansekriterier markeres mer ✅.
1. **Som en spiller ønsker jeg å kunne se og navigere gjennom en bane for å kunne gjøre fremgang i spillet.** ✅
   - Akseptansekriterier:
        Banen vises gjennom å implementere Model-View-Controller (MVC) hvor View viser banen og Model håndterer logikken og Controller håndterere bruker input. ✅
        - Arbeidsoppgaver:    
            - Implementere klassene Model.java, View.java, Controller.java. ✅
            - Abstrahere bort detaljer ved å implementere interfacene IModel.java, IView.java, IController.java  
              Model.java håndterer logikken til spillet, slik at den flytter på spilleren dersom Controller gir beskjed om at spilleren har forsøkt å flytte på seg. ✅
            - Controller.java skal lytte etter brukerinput og kalle på metoder basert på dette. ✅
            - I View.java skal man ha tilgang på et model og game objekt. ✅
            - I View.java skal man lese inn Tiled banen med LibGDX metoder som vil gjøre banen synlig for spilleren. ✅
            - View.java må også håndtere animasjonen til spilleren gjennom å lese en PNG-fil. View har tilgang på player-objektet gjennom model-objektet ettersom model skal styre logikken og har dermed tilgang til player.✅


2. **Som en spiller ønsker jeg å kunne styre karakteren min med piltastene slik at jeg kan navigere gjennom nivåene.** ✅
   - Akseptansekriterier:
   - Karakteren beveger seg i ønsket retning når piltastene trykkes. ✅
        - Arbeidsoppgaver:    
            - Implementer type event listeners i Controller.java slik at når en spiller trykker på piltast mot venstre så vil controller kalle på en metode hos model som da vil flytte på spilleren. View må da tolke posisjonen slik at den leser den nye posisjonen til spilleren. ✅
   - Karakteren stopper når piltasten slippes.✅
        - Arbeidsoppgaver:
            - Det finnes en egen type metode i libGDX bilblioteket som sjekker om spilleren holder inne knappen eller ikke. Den heter `Gdx.input.isKeyPressed()` ✅
   - Karakteren kan ikke gå gjennom vegger eller andre uoverstigelige hindringer.✅
        - Arbeidsoppgaver:
          - Implementere en funksjon i model som sjekker om spilleren kolliderer med banen. ✅


3. **Som en spiller ønsker jeg å kunne hoppe med min karakter ved å trykke på en knapp slik at jeg kan unngå hindringer og nå høyere plattformer.  ** ✅
     - Akseptansekriterier:
       - Karakteren hopper når hoppeknappen trykkes. ✅ 
         - Arbeidsoppgaver:
           - Det finnes en egen type metode i libGDX biblioteket som skjekker om spilleren holder inne knappen eller ikke. Den heter `Gdx.input.isKeyPressed()` ✅
       - Karakteren lander trygt på plattformen og ikke faller gjennom den. ✅
          - Arbeidsoppgaver:
            - Definere en konstant variabel som er tyngekraften og bestemmer hvor mye spilleren skal trekkes ned i y-aksen for hver gang update-metoden blir kalt i Model.java. ✅


4. **Som en spiller ønsker jeg å kunne samle mynter i løpet av spillet for å øke poengsummen min.** ✅
   - Akseptansekriterier:
        - Mynter er plassert på forskjellige steder i hvert nivå. ✅
            - Arbeidsoppgaver:
                - Implementere en metode i Model.java som leser av et layer fra Tiled banen hvor man har markert hvor myntene befinner seg på banen. ✅
                - View.java må ha en metode som leser av layeret fra model og tegner disse på banen. ✅
            - Arbeidsoppgaver:
                - I model.java implementerer vi en metode som sjekker om spilleren er borti mynten, og vil deretter fjerne den og øke spillerens sum. ✅
                - Etter at model.java har fjernet myntent, vil update-metoden i View.java da se at myntene er borte og vise tilsvarende. ✅
                - En lydeffekt spilles av når en mynt samles inn for å indikere suksess. ✅
            - Arbeidsoppgaver:
                - Legge til lyden i SoundController.java klassaen. ✅
                - I model.java vil man registrere at spilleren har plukket opp en mynt, som sender signal til klassen SoundController.java klassen som vil spille av lyden. ✅


5. **Som en spiller ønsker jeg å kunne samle power-ups som gir meg midlertidige evner, for eksempel høyere hopp eller usynlighet.** ✅
   - Akseptansekriterier:
        - Power-ups er plassert på spesielle steder i nivåene. ✅
            - Arbeidsoppgaver:
                - Legge til et layer i Tiled banen for hvor power-ups skal være plassert. ✅
                - Implementere en metode Model.java som leser dette layeret og lagrer det i en variabel. ✅
                - View.java vil lese dette layer-et og vise power-ups. ✅
        - Når karakteren samler en power-up, får de den tilhørende evnen i en begrenset periode.✅
            - Arbeidsoppgaver:
                - Implementere en metode i Player som endrer på feltvariabler til Player klassen som indikerer at spilleren har power-up. ✅
                - Når en spiller forsøker å gjøre noe gjennom Controller som lytter på brukerinput, så kan controller kalle på model som skal flytte på spilleren. Metoden i model kan gjøre en kjapp sjekk om spilleren har power-up eller ikke, ettersom det vil ha betydning for hvordan spilleren kan bevege seg. ✅
        - Effekten av power-upen er synlig på skjermen (for eksempel større sprite for høyere hopp). ✅
            - Arbeidsoppgaver:
                - Må tegne karakteren på nytt i Asprite så det blir synlig for spiller at de har fått power-upen.✅
                - Vi kan bruke metoden render() i View.java, til å sjekke om spilleren har fått en power-up. Har spiller fått en power-up vil utseende til karakteren endres, med den nye Aspirte filen. ✅
         
6. **Som en spiller ønsker jeg å kunne bekjempe fiender ved å hoppe på dem eller bruke power-ups slik at jeg kan overvinne hindringer og utfordringer.** ✅
   - Akseptansekriterier:
        - Fiender beveger seg innenfor visse områder og kan skade karakteren ved kontakt.✅
          - Arbeidsoppgaver:    
            - Implementere en metode i Model.java som flytter rundt på fiendene. ✅
            - Må ta i bruk checkCollision-metode fra Model.java slik at fiendene beveger seg etter samme betingelser som spilleren. ✅
          - Arbeidsoppgaver
            - Implementere en metode i Model.java som sjekker om spilleren hopper på fienden og treffer den ovenfra. ✅
            - Når spilleren treffer fienden ovenfra, så må model.java fjerne denne fienden fra en arraylist eller lignende slik at View.java kan oppdatere det spilleren ser. ✅
            - Når en fiende blir beseiret, forsvinner den fra skjermen med en passende animasjon. ✅
          - Arbeidsoppgaver:
            - I View.java sin render-metode må vi lage en renderMonster() metode som da vil oppdatere spriten til monsteret. Denne metoden sjekker at monsteret ikke lever og fjerner det fra Viewet. ✅


7. **Som en spiller ønsker jeg å kunne nå slutten av hvert nivå for å gå videre til neste nivå eller utfordring.** ✅
   - Akseptansekriterier:
        - Hvert nivå har en tydelig definert avslutning, for eksempel en dør eller en portal. ✅
            - Arbeidsoppgaver:
                - Implementere en GAME_WON screen og håndtere i model-klassen når spilleren er i mål slik at man kan bytte skjermen til GAME_WON skjermen. ✅
        - Når karakteren når avslutningen av et nivå, blir de overført til neste nivå. Spilleren får da opp en skjerm om å spille banen på nytt eller fortsette til neste nivå. ✅
            - Arbeidsoppgaver:
                - Implementere alternativer i GAME_WON klassen der spilleren kan navigere/trykke seg til StartScreen eller tilbake til skjermen som viser valg av bane.✅


Disse akseptansekriteriene har bidratt til å veilede utviklingen av spillet ved å definere klare krav som må oppfylles for at hver brukerhistorie skal anses som fullført og akseptabel.
Vi har holdt oss til å kun legge inn arbeidsoppgavene i Kanban board istedenfor å inkludere i milestones. Dette var ettersom vi følte det ville gi for mange holdepunkter og mer rot dersom vi inkluderer milestones.
   
## Prioriteringer for videre arbeid:

Ting vi satt oss som mål gjennom alle obligene og har fullført til oblig4:
- Fikse kollisjon i x-aksen. ✅
- Når spilleren detter ut, så “dør” spilleren og gamestate setter til GAME_OVER. ✅
- Lage GAME_OVER screen og håndtere når spilleren dør. ✅
- Lage GAME_WON screen og håndtere når spilleren er i mål. ✅
- Få spilleren til å starte på riktig posisjon. ✅
- Fikse slik at banen dekker hele skjermen/spillvinduet, slik at det ikke lenger er svarte bokser på skjermen øverst og til venstre. ✅
- Power-Up ✅
- I LevelScreen skal vi legge til en “back to main menu”-knapp. ✅
- Objektfabrikk for fiender som tilfeldig velger monstre som skal plasseres på banen. ✅
- Mer dokumentasjon av public-metoder. ✅
- Rydding av koden. ✅
- Skrive så mange tester vi klarer så vi er godt over kravet om 75% test coverage. ✅

## Bugs:
- Det er en bug hvor man av og til blir elminiert med en gang man trykker "play again". Vi er ikke helt sikre på hvorfor det skjer.
En mistanke er at et monster spawner oppå der spilleren starter, men det burde ikke skje ettersom i koden står det at
monstre skal spawne på et punkt på x-aksen foran spilleren. 
Vi fant ut årsaken onsdag 01.05. Grunnen var at i GameWonScreen så ble ikke startposisjonen til spilleren satt. 
Derfor startet spilleren innenfor rekkevideen til monstrene og et monster kunne dermed spawne oppå spilleren slik at 
det gikk rett til GameOverScreen. Bug-en er fikset ✅.

Eldre bugs:
- Bug: spillet fortsetter selv om spilleren har detti ut av banen. ✅
- Bug: Spilleren kan gå inn i klosser som egentlig er en del av kollisjon-layer. Dette er gjennom x-aksen. På grunn av dette kan spilleren kjapt gå av en plattform, falle litt ned og så gå tilbake slik at spilleren blir flyttet opp på plattformen igjen. Selv om spilleren treffer midt på boksen. ✅
- Bug: Banen ligger ikke helt kant i kant med skjermen/spillvinduet. Så det er svarte bokser helt til venstre når man laster inn banen og over himmelen i banen. ✅
- Bug: Av og til kan spilleren være flere tiles over monsteret, men likevel bli elimenert og skjermen går til Game Over. ✅
- Bug: Monstrenes bevegelser overskriver effekten av tyngdekraft av og til. ✅
   
# Kode
Utbedring av feil: Vi fikk påpekelse om at vi manglet objektfabrikk og abstrakt objektfabrikk. 
Dette er nå på plass gjennom den abstrakte objektfrabrikken "MonsterFactory" og den konkrete objektfabrikken "MushroomFactory".
Koden er gjennomgått og ryddet i. Javadocs er også skrevet inn.

## Kontroll av OS kompatibilitet:
På gruppen har vi macOS og Windows, som kjører spillet helt fint.
Vi har testet med Linux også, noe som også fungerer helt fint.

### Klassediagram:
Klassediagram finnes i ‘/doc/diagram-oblig4’.
Siden oblig3 har det ikke skjedd altfor store endringer som gjør at vi ønsker å endre for mye på klassediagrammet.
Vi har likevel gjort noen endringer. ControllablePlayer og ViewableCharacter er fjernet. Monster-klassen er lagt inn samt interfacet IEntity
siden det er det Monster og Player implementerer.
Vi har også lagt inn GameLauncher som inneholder main() som starter det hele.

### Tester
Vi har dekket kravet om 75% test coverage med at vi har 76%.
Nyligste testen som er lagt til er "MushroomFactoryTest" for objektfabrikken og slik at vi opprettholder kravet om test coverage.